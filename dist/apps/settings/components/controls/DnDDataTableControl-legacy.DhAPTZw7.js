System.register(["../../index-legacy.Do5wtnh0.js","../../../../common/settings-store-legacy.DTgfCRdh.js","../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_82767a7d_lang-legacy.C1uOXbmP.js","../../../../common/EditOutlined-legacy.D5NGeNjT.js","../../../../common/DeleteOutlined-legacy.D_untl60.js","../../../../common/cloneDeep-legacy.CKdUP47I.js","../../../../common/index-legacy.DizHo33y.js","../../../../common/_plugin-vue_export-helper-legacy.DgAO6S8O.js","../../../../common/motion-legacy._oOtLB3w.js","../../../../common/_assignValue-legacy.DPFpuIf6.js","../../../../common/_getPrototype-legacy.xPLh3_cu.js","../../../../common/index-legacy.DxxtxO2N.js","../../../../common/index-legacy.D-SkfdBI.js","../../../../common/index-legacy.Dto3owRC.js","../../../../common/useState-legacy.DugenP6A.js","../../../../common/warning-legacy.BV4CRm2j.js","../../../../common/compact-item-legacy.CNoiQxJ9.js","../../../../common/createContext-legacy.Bwc0ej3O.js","../../../../common/useMergedState-legacy.PbfLvw1y.js","../../../../common/KeyCode-legacy.CYgXvjDm.js","../../../../common/ActionButton-legacy.RydJ0k_w.js"],(function(e,l){"use strict";var a,t,o,n,c,d,s,i,r,u,m,y,g,p,_,j,f,v,k,b,D,h,w,x,C,S;return{setters:[e=>{a=e.d,t=e.t,o=e.s,n=e.S,c=e.r,d=e.o,s=e.c,i=e.a,r=e.U,u=e.V,m=e.h,y=e.u,g=e.b,p=e.w,_=e.n,j=e.i,f=e.f,v=e.e,k=e.$},e=>{b=e.u},e=>{D=e.d},e=>{h=e.E},e=>{w=e.D},e=>{x=e.c},e=>{C=e.A},e=>{S=e._},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l={class:"wwp-full-width-table"},O={class:"thead-dark"},V={key:0,class:"editable-row-operations"},U={key:0,class:"editable-cell"},q=["onClick"];e("default",S(a({__name:"DnDDataTableControl",props:{params:{type:Object,required:!0},data:{type:Object,required:!0},editFields:{type:Object,required:!1,default:()=>({})},editedFields:{type:Number,required:!1,default:0}},emits:["fieldUpdatedData","fieldDeletedData","updateDataSource"],setup(e,{emit:a}){const S=e,{params:A,data:E,editedFields:F}=t(S),T=b(),{inlineMappingEdit:B}=o(T),I=A.value,K=I.fields,M=n({data:window.lodash.sortBy(E.value,(e=>void 0!==e.field_order&&null!==e.field_order?e.field_order:0))}),P=I.editable,N=I.can_delete,Q=I.delete_action,R=I.sort_action,W=c(I.show_in_table),X=c(!1),Y=n([]),Z=F,$=a,z=c([]),G=async e=>{const l=[{key:"action",value:R}],a=M.data;l.push({key:"list",value:a});try{const e=await k(l,!1,!0);null!=e&&$("updateDataSource",e)}catch(t){console.error(t)}};return(e,a)=>(d(),s("table",l,[i("thead",O,[i("tr",null,[(d(!0),s(r,null,u(y(K),((e,l)=>(d(),s("th",{key:l,scope:"col"},m(e.title),1)))),128))])]),g(y(D),{modelValue:M.data,"onUpdate:modelValue":a[0]||(a[0]=e=>M.data=e),tag:"tbody","item-key":"name",onEnd:G},{item:p((({element:e})=>[i("tr",{class:_({"not-draggable":!(null!=e&&e.draggable)})},[(d(!0),s(r,null,u(W.value,((l,a)=>{return d(),s("td",{key:a,scope:"row"},["operation"===l?(d(),s("div",V,[null===y(Z)?(d(),s("div",U,[y(P)?(d(),s("a",{key:0,onClick:l=>{return a=e.key,Y[a]=x(M.data.filter((e=>a===e.key))[0]),z.value=Y[a],B.value=!1,void $("fieldUpdatedData",z.value);var a}},[g(y(h))],8,q)):j("",!0),f(" Â  "),y(N)&&"no"!==(null==e?void 0:e.deletetable)?(d(),s(r,{key:1},[M.data.length?(d(),v(y(C),{key:0,title:"Sure to delete?",onConfirm:l=>(async e=>{const l=M.data.filter((l=>e===l.key))[0],a=[{key:"action",value:Q}];for(const[o,n]of Object.entries(l))a.push({key:o,value:n});try{"success"===await k(a)&&($("fieldDeletedData",e),M.data=M.data.filter((l=>l.key!==e)))}catch(t){console.error(t)}finally{X.value=!1}})(e.key)},{default:p((()=>[i("a",null,[g(y(w))])])),_:2},1032,["onConfirm"])):j("",!0)],64)):j("",!0)])):j("",!0)])):(d(),s(r,{key:1},[f(m((t=e[l],Array.isArray(t)?t.join(", "):t)),1)],64))]);var t})),128))],2)])),_:1},8,["modelValue"])]))}}),[["__scopeId","data-v-82767a7d"]]))}}}));
